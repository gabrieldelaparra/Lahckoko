@page "/d3"
@*@using AspNetMonsters.Blazor.Geolocation*@
@using Lahckoko.Blazor
@inject LocationService LocationService;

@inject IJSRuntime JsRuntime;

<h3>Component1</h3>

<div>
    Lat: @Location?.Latitude <br />
    Long: @Location?.Longitude <br />
    Accuracy: @Location?.Accuracy <br />
</div>


<style>
    body {
        margin: 0;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }

    polygon {
        fill: CadetBlue
    }
</style>



@code {

    Location Location {get;set;}

    protected override async Task OnInitializedAsync()
    {
        //location = await LocationService.GetLocationAsync();
        //return base.OnInitializedAsync();
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            //await JsRuntime.InvokeVoidAsync("d3Draw", points);
            Location = await LocationService.GetLocationAsync();
            //location = await LocationService.GetLocationAsync();
        }
    }
    private List<Point> points = new List<Point> {
        new Point(-767.937, -247.274),
        new Point(-415.750, -663.172),
        new Point(84.062, -880.411),
        new Point(628.414, -854.185),
        new Point(1105.029, -589.903),
        new Point(1415.602, -142.074),
        new Point(1496.078, 396.933),
        new Point(1329.857, 915.949),
        new Point(951.223, 1307.922)
    };

    public class Point
    {
        public Point(double x, double y)
        {
            this.x = x;
            this.y = y;
        }
        public double x { get; set; }
        public double y { get; set; }
    }
}
